# AningCall Backend API Documentation

## ğŸ“± Frontend Integration Guide

### Base URL
```
https://api.aningcall.com
```

### ì¸ì¦
ëª¨ë“  APIëŠ” JWT Bearer í† í° ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.
```
Authorization: Bearer {JWT_TOKEN}
```

---

## ğŸ”” ì•ŒëŒ ê´€ë¦¬ API

### 1. ì•ŒëŒ ìƒì„±
```http
POST /api/alarms
Content-Type: application/json

{
  "alarmTime": "2024-01-15T07:30:00",
  "instructions": "ë¶€ë“œëŸ½ê²Œ ê¹¨ì›Œì£¼ì„¸ìš”",
  "voice": "ALLOY"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "alarmId": 123,
    "alarmTime": "2024-01-15T07:30:00",
    "instructions": "ë¶€ë“œëŸ½ê²Œ ê¹¨ì›Œì£¼ì„¸ìš”",
    "voice": "ALLOY",
    "voiceDescription": "ê· í˜• ì¡íŒ ì¤‘ì„±ì  ëª©ì†Œë¦¬",
    "active": true,
    "createdAt": "2024-01-15T06:00:00",
    "updatedAt": "2024-01-15T06:00:00"
  }
}
```

### 2. ì•ŒëŒ ëª©ë¡ ì¡°íšŒ
```http
GET /api/alarms?activeOnly=true
```

### 3. íŠ¹ì • ì•ŒëŒ ì¡°íšŒ
```http
GET /api/alarms/{alarmId}
```

### 4. ì•ŒëŒ ìˆ˜ì •
```http
PUT /api/alarms/{alarmId}
```

### 5. ì•ŒëŒ ì‚­ì œ
```http
DELETE /api/alarms/{alarmId}
```

---

## ğŸ“ OpenAI Realtime API

### ì„¸ì…˜ ìƒì„± (í†µí™” ì‹œì‘)
```http
POST /api/realtime/session?alarmId={alarmId}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "ephemeralKey": "eph_abc123...",
    "callLogId": 456,
    "instructions": "ë¶€ë“œëŸ½ê²Œ ê¹¨ì›Œì£¼ì„¸ìš”",
    "voice": "alloy"
  }
}
```

### Flutter ì—°ë™ ìˆœì„œ
1. ì´ APIë¡œ ephemeralKey ë°›ê¸°
2. ephemeralKeyë¡œ OpenAI Realtime API ì§ì ‘ ì—°ê²°
3. WebRTC ìŒì„± í†µí™” ì§„í–‰
4. í†µí™” ì¢…ë£Œ í›„ conversation dataë¥¼ ë°±ì—”ë“œë¡œ ì „ì†¡

---

## ğŸµ ìŒì„± íƒ€ì… ì˜µì…˜

| ì½”ë“œ | ì„¤ëª… |
|------|------|
| `ALLOY` | ê· í˜• ì¡íŒ ì¤‘ì„±ì  ëª©ì†Œë¦¬ |
| `ASH` | ë¶€ë“œëŸ½ê³  ë”°ëœ»í•œ ëª©ì†Œë¦¬ |
| `BALLAD` | ì°¨ë¶„í•˜ê³  ì„œì •ì ì¸ ëª©ì†Œë¦¬ |
| `CORAL` | ë°ê³  ì¹œê·¼í•œ ëª©ì†Œë¦¬ |
| `ECHO` | ê¹Šê³  ìš¸ë¦¼ì´ ìˆëŠ” ëª©ì†Œë¦¬ |
| `SAGE` | ì§€í˜œë¡­ê³  ì•ˆì •ì ì¸ ëª©ì†Œë¦¬ |
| `SHIMMER` | ë°˜ì§ì´ëŠ” í™œê¸°ì°¬ ëª©ì†Œë¦¬ |
| `VERSE` | ë¦¬ë“œë¯¸ì»¬í•˜ê³  í‘œí˜„ë ¥ ì¢‹ì€ ëª©ì†Œë¦¬ |

---

## âš ï¸ ì—ëŸ¬ ì²˜ë¦¬

**ì—ëŸ¬ ì‘ë‹µ í˜•ì‹:**
```json
{
  "success": false,
  "errorCode": "ALARM_NOT_FOUND",
  "message": "ì•ŒëŒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
  "timestamp": "2024-01-15T07:30:00"
}
```

**ì£¼ìš” ì—ëŸ¬ ì½”ë“œ:**
- `USER_NOT_FOUND`, `ALARM_NOT_FOUND`, `UNAUTHORIZED_ALARM_ACCESS`
- `ACTIVE_CALL_EXISTS`, `CALL_NOT_FOUND`, `OPENAI_API_ERROR`